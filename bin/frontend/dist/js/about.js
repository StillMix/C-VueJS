(self["webpackChunkmy_vue_app"]=self["webpackChunkmy_vue_app"]||[]).push([[594],{599:function(e,t,r){"use strict";e.exports=r.p+"img/sketch12.jpg"},1509:function(e,t,r){"use strict";e.exports=r.p+"img/sketch5.jpg"},1672:function(e,t,r){"use strict";e.exports=r.p+"img/sketch11.jpg"},2489:function(e,t,r){"use strict";var i=r(6518),n=r(9565),a=r(9306),o=r(8551),s=r(1767),l=r(9462),c=r(6319),d=r(6395),g=l((function(){var e,t,r,i=this.iterator,a=this.predicate,s=this.next;while(1){if(e=o(n(s,i)),t=this.done=!!e.done,t)return;if(r=e.value,c(i,a,[r,this.counter++],!0))return r}}));i({target:"Iterator",proto:!0,real:!0,forced:d},{filter:function(e){return o(this),a(e),new g(s(this),{predicate:e})}})},2529:function(e){"use strict";e.exports=function(e,t){return{value:e,done:t}}},3864:function(e,t,r){var i={"./sketch.jpg":9494,"./sketch10.jpg":8933,"./sketch11.jpg":1672,"./sketch12.jpg":599,"./sketch2.jpg":4174,"./sketch3.jpg":5483,"./sketch4.jpg":7544,"./sketch5.jpg":1509,"./sketch6.jpg":7306,"./sketch7.jpg":4823,"./sketch8.jpg":6612,"./sketch9.jpg":4657};function n(e){var t=a(e);return r(t)}function a(e){if(!r.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=a,e.exports=n,n.id=3864},4114:function(e,t,r){"use strict";var i=r(6518),n=r(8981),a=r(6198),o=r(4527),s=r(6837),l=r(9039),c=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),d=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},g=c||!d();i({target:"Array",proto:!0,arity:1,forced:g},{push:function(e){var t=n(this),r=a(t),i=arguments.length;s(r+i);for(var l=0;l<i;l++)t[r]=arguments[l],r++;return o(t,r),r}})},4174:function(e,t,r){"use strict";e.exports=r.p+"img/sketch2.jpg"},4376:function(e,t,r){"use strict";var i=r(2195);e.exports=Array.isArray||function(e){return"Array"===i(e)}},4527:function(e,t,r){"use strict";var i=r(3724),n=r(4376),a=TypeError,o=Object.getOwnPropertyDescriptor,s=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=s?function(e,t){if(n(e)&&!o(e,"length").writable)throw new a("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},4657:function(e,t,r){"use strict";e.exports=r.p+"img/sketch9.jpg"},4823:function(e,t,r){"use strict";e.exports=r.p+"img/sketch7.jpg"},5483:function(e,t,r){"use strict";e.exports=r.p+"img/sketch3.jpg"},6279:function(e,t,r){"use strict";var i=r(6840);e.exports=function(e,t,r){for(var n in t)i(e,n,t[n],r);return e}},6319:function(e,t,r){"use strict";var i=r(8551),n=r(9539);e.exports=function(e,t,r,a){try{return a?t(i(r)[0],r[1]):t(r)}catch(o){n(e,"throw",o)}}},6612:function(e,t,r){"use strict";e.exports=r.p+"img/sketch8.jpg"},6837:function(e){"use strict";var t=TypeError,r=9007199254740991;e.exports=function(e){if(e>r)throw t("Maximum allowed index exceeded");return e}},7306:function(e,t,r){"use strict";e.exports=r.p+"img/sketch6.jpg"},7544:function(e,t,r){"use strict";e.exports=r.p+"img/sketch4.jpg"},8401:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return be}});var i=r(641);const n={class:"draw"},a={class:"draw__content"};function o(e,t,r,o,s,l){const c=(0,i.g2)("Header"),d=(0,i.g2)("DrawToolbar"),g=(0,i.g2)("ImageGallery"),u=(0,i.g2)("ImageViewModal"),m=(0,i.g2)("DeleteConfirmModal"),h=(0,i.g2)("UploadModal");return(0,i.uX)(),(0,i.CE)("div",n,[(0,i.bF)(c),(0,i.Lk)("div",a,[t[3]||(t[3]=(0,i.Lk)("h1",{class:"draw__title"},"Рисовальная студия",-1)),t[4]||(t[4]=(0,i.Lk)("p",{class:"draw__subtitle"},"Выберите изображение или добавьте новое",-1)),(0,i.bF)(d,{"current-filter":e.currentFilter,onUpload:t[0]||(t[0]=t=>e.showUpload=!0),onFilterChange:e.setFilter},null,8,["current-filter","onFilterChange"]),(0,i.bF)(g,{images:e.filteredImages,favorites:e.favorites,onImageClick:e.openImageDetail,onToggleFavorite:e.toggleFavorite},null,8,["images","favorites","onImageClick","onToggleFavorite"])]),e.selectedImage?((0,i.uX)(),(0,i.Wv)(u,{key:0,image:e.selectedImage,onClose:e.closeImageDetail,onEdit:e.editImage,onDownload:e.downloadImage,onDelete:e.confirmDelete},null,8,["image","onClose","onEdit","onDownload","onDelete"])):(0,i.Q3)("",!0),(0,i.bF)(m,{show:e.showDeleteConfirm,onCancel:t[1]||(t[1]=t=>e.showDeleteConfirm=!1),onConfirm:e.deleteImage},null,8,["show","onConfirm"]),(0,i.bF)(h,{show:e.showUpload,"preview-url":e.uploadPreview,onClose:t[2]||(t[2]=t=>e.showUpload=!1),onFileSelected:e.previewFile,onUpload:e.uploadImage},null,8,["show","preview-url","onFileSelected","onUpload"])])}var s=r(1114),l=(r(4114),r(8111),r(2489),r(7884)),c=r(4149),d=r(33);const g={class:"draw-toolbar"},u={class:"draw-toolbar__filters"},m=["onClick"];function h(e,t,r,n,a,o){const s=(0,i.g2)("AddImg");return(0,i.uX)(),(0,i.CE)("div",g,[(0,i.Lk)("button",{class:"draw-toolbar__upload-btn",onClick:t[0]||(t[0]=t=>e.$emit("upload"))},[(0,i.bF)(s,{width:28,height:28}),t[1]||(t[1]=(0,i.Lk)("span",null,"Добавить изображение",-1))]),(0,i.Lk)("div",u,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.filters,(t=>((0,i.uX)(),(0,i.CE)("button",{key:t.id,class:(0,d.C4)(["draw-toolbar__filter-btn",{"draw-toolbar__filter-btn--active":e.currentFilter===t.id}]),onClick:r=>e.$emit("filter-change",t.id)},(0,d.v_)(t.name),11,m)))),128))])])}var p=r(4378),f=function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};let v=class extends l.lD{constructor(...e){super(...e),(0,s.A)(this,"currentFilter",void 0),(0,s.A)(this,"filters",[{id:"all",name:"Все"},{id:"recent",name:"Недавние"},{id:"favorite",name:"Избранные"}])}};v=f([(0,l.JY)({components:{AddImg:p.A},props:{currentFilter:String},emits:["upload","filter-change"]})],v);var w=v,k=r(6262);const _=(0,k.A)(w,[["render",h],["__scopeId","data-v-9633f2fe"]]);var y=_,b=r(3751);const I={key:0,class:"image-gallery__empty"};function C(e,t,r,n,a,o){const s=(0,i.g2)("ImageCard");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(b.F,{name:"gallery",tag:"div",class:"image-gallery"},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.images,((t,r)=>((0,i.uX)(),(0,i.Wv)(s,{key:t,image:t,index:r,"is-favorite":e.favorites.includes(t),style:(0,d.Tr)({animationDelay:.05*r+"s"}),onClick:i=>e.$emit("image-click",t,r),onToggleFavorite:r=>e.$emit("toggle-favorite",t)},null,8,["image","index","is-favorite","style","onClick","onToggleFavorite"])))),128))])),_:1}),0===e.images.length?((0,i.uX)(),(0,i.CE)("div",I,t[0]||(t[0]=[(0,i.Lk)("p",null,"Изображения не найдены",-1)]))):(0,i.Q3)("",!0)],64)}const D={class:"image-card"},F={class:"image-card__inner"},j=["src","alt"],x={class:"image-card__overlay"},L={key:0},A={key:1},$={class:"image-card__caption"};function O(e,t,r,n,a,o){const s=(0,i.g2)("DrawingImg");return(0,i.uX)(),(0,i.CE)("div",D,[(0,i.Lk)("div",F,[(0,i.Lk)("img",{src:e.imageUrl,alt:e.imageCaption,class:"image-card__img",loading:"lazy",onClick:t[0]||(t[0]=(0,b.D$)((t=>e.$emit("click",e.image,e.index)),["prevent"]))},null,8,j),(0,i.Lk)("div",x,[(0,i.Lk)("button",{class:"image-card__btn image-card__btn--edit",onClick:t[1]||(t[1]=(0,b.D$)((t=>e.$emit("click",e.image,e.index)),["prevent"]))},[(0,i.bF)(s,{width:20,height:20}),t[3]||(t[3]=(0,i.eW)(" Рисовать "))]),(0,i.Lk)("button",{class:"image-card__btn image-card__btn--favorite",onClick:t[2]||(t[2]=(0,b.D$)((t=>e.$emit("toggle-favorite",e.image)),["stop","prevent"]))},[e.isFavorite?((0,i.uX)(),(0,i.CE)("span",L,"★")):((0,i.uX)(),(0,i.CE)("span",A,"☆"))])])]),(0,i.Lk)("div",$,(0,d.v_)(e.imageCaption),1)])}var S=r(6131),P=function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};let E=class extends l.lD{constructor(...e){super(...e),(0,s.A)(this,"image",void 0),(0,s.A)(this,"index",void 0),(0,s.A)(this,"isFavorite",void 0)}get imageUrl(){try{if(this.image&&this.image.startsWith("data:"))return this.image;if(this.image&&this.image.startsWith("userfoto-")){const e=localStorage.getItem(`userImage_${this.image}`);if(e)return e;if(window.backend)return`drawings/${this.image}`}return r(3864)(`./${this.image}`)}catch(e){return console.error("Ошибка при загрузке изображения:",e),""}}get imageCaption(){return this.image&&this.image.startsWith("data:")?"Загруженное изображение":this.image.replace(/\.[^/.]+$/,"").replace(/_/g," ")}};E=P([(0,l.JY)({components:{DrawingImg:S.A},props:{image:String,index:Number,isFavorite:Boolean},emits:["click","toggle-favorite"]})],E);var R=E;const U=(0,k.A)(R,[["render",O],["__scopeId","data-v-7f1e5445"]]);var T=U,W=function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};let X=class extends l.lD{constructor(...e){super(...e),(0,s.A)(this,"images",void 0),(0,s.A)(this,"favorites",void 0)}};X=W([(0,l.JY)({components:{ImageCard:T},props:{images:Array,favorites:Array},emits:["image-click","toggle-favorite"]})],X);var H=X;const J=(0,k.A)(H,[["render",C],["__scopeId","data-v-7178323f"]]);var M=J;const Q={class:"image-modal__image-container"},Y=["src","alt"],B={class:"image-modal__controls"};function K(e,t,r,n,a,o){return(0,i.uX)(),(0,i.Wv)(b.eB,{name:"modal"},{default:(0,i.k6)((()=>[e.image?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"image-modal",onClick:t[5]||(t[5]=t=>e.$emit("close"))},[(0,i.Lk)("div",{class:"image-modal__content",onClick:t[4]||(t[4]=(0,b.D$)((()=>{}),["stop"]))},[(0,i.Lk)("button",{class:"image-modal__close",onClick:t[0]||(t[0]=t=>e.$emit("close"))},"×"),(0,i.Lk)("div",Q,[(0,i.Lk)("img",{src:e.imageUrl,alt:e.imageCaption,class:"image-modal__image"},null,8,Y)]),(0,i.Lk)("div",B,[(0,i.Lk)("button",{class:"image-modal__btn",onClick:t[1]||(t[1]=t=>e.$emit("edit"))},t[6]||(t[6]=[(0,i.Lk)("span",{class:"image-modal__btn-icon"},"✏️",-1),(0,i.eW)(" Рисовать ")])),(0,i.Lk)("button",{class:"image-modal__btn",onClick:t[2]||(t[2]=t=>e.$emit("download"))},t[7]||(t[7]=[(0,i.Lk)("span",{class:"image-modal__btn-icon"},"⬇️",-1),(0,i.eW)(" Скачать ")])),(0,i.Lk)("button",{class:"image-modal__btn image-modal__btn--delete",onClick:t[3]||(t[3]=t=>e.$emit("delete"))},t[8]||(t[8]=[(0,i.Lk)("span",{class:"image-modal__btn-icon"},"🗑️",-1),(0,i.eW)(" Удалить ")]))])])])):(0,i.Q3)("",!0)])),_:1})}var N=function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};let q=class extends l.lD{constructor(...e){super(...e),(0,s.A)(this,"image",void 0)}get imageUrl(){try{if(this.image&&this.image.startsWith("data:"))return this.image;if(this.image&&this.image.startsWith("userfoto-")){const e=localStorage.getItem(`userImage_${this.image}`);if(e)return e;if(window.backend)return`drawings/${this.image}`}return r(3864)(`./${this.image}`)}catch(e){return console.error("Ошибка при загрузке изображения:",e),""}}get imageCaption(){return this.image&&this.image.startsWith("data:")?"Загруженное изображение":this.image.replace(/\.[^/.]+$/,"").replace(/_/g," ")}};q=N([(0,l.JY)({props:{image:String},emits:["close","edit","download","delete"]})],q);var V=q;const G=(0,k.A)(V,[["render",K],["__scopeId","data-v-61d8e601"]]);var z=G;const Z={key:0,class:"delete-modal"},ee={class:"delete-modal__content"},te={class:"delete-modal__buttons"};function re(e,t,r,n,a,o){return(0,i.uX)(),(0,i.Wv)(b.eB,{name:"modal"},{default:(0,i.k6)((()=>[e.show?((0,i.uX)(),(0,i.CE)("div",Z,[(0,i.Lk)("div",ee,[t[2]||(t[2]=(0,i.Lk)("h3",null,"Удалить изображение?",-1)),t[3]||(t[3]=(0,i.Lk)("p",null,"Это действие нельзя будет отменить.",-1)),(0,i.Lk)("div",te,[(0,i.Lk)("button",{class:"delete-modal__btn",onClick:t[0]||(t[0]=t=>e.$emit("cancel"))}," Отмена "),(0,i.Lk)("button",{class:"delete-modal__btn delete-modal__btn--delete",onClick:t[1]||(t[1]=t=>e.$emit("confirm"))}," Удалить ")])])])):(0,i.Q3)("",!0)])),_:1})}var ie=function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};let ne=class extends l.lD{constructor(...e){super(...e),(0,s.A)(this,"show",void 0)}};ne=ie([(0,l.JY)({props:{show:Boolean},emits:["cancel","confirm"]})],ne);var ae=ne;const oe=(0,k.A)(ae,[["render",re],["__scopeId","data-v-0b195892"]]);var se=oe;const le={key:0,class:"upload-modal"},ce={class:"upload-modal__content"},de={key:0,class:"upload-modal__preview"},ge=["src"];function ue(e,t,r,n,a,o){return(0,i.uX)(),(0,i.Wv)(b.eB,{name:"modal"},{default:(0,i.k6)((()=>[e.show?((0,i.uX)(),(0,i.CE)("div",le,[(0,i.Lk)("div",ce,[(0,i.Lk)("button",{class:"upload-modal__close",onClick:t[0]||(t[0]=t=>e.$emit("close"))},"×"),t[8]||(t[8]=(0,i.Lk)("h3",null,"Добавить новое изображение",-1)),(0,i.Lk)("div",{class:"upload-modal__drop-area",onClick:t[2]||(t[2]=(...t)=>e.triggerFileInput&&e.triggerFileInput(...t)),onDragover:t[3]||(t[3]=(0,b.D$)((()=>{}),["prevent"])),onDrop:t[4]||(t[4]=(0,b.D$)(((...t)=>e.handleFileDrop&&e.handleFileDrop(...t)),["prevent"]))},[(0,i.Lk)("input",{type:"file",ref:"fileInput",style:{display:"none"},accept:"image/*",onChange:t[1]||(t[1]=(...t)=>e.handleFileSelect&&e.handleFileSelect(...t))},null,544),t[6]||(t[6]=(0,i.Lk)("div",{class:"upload-modal__icon"},"+",-1)),t[7]||(t[7]=(0,i.Lk)("p",null,"Нажмите для выбора или перетащите файл сюда",-1))],32),e.previewUrl?((0,i.uX)(),(0,i.CE)("div",de,[(0,i.Lk)("img",{src:e.previewUrl,alt:"Предпросмотр"},null,8,ge),(0,i.Lk)("button",{class:"upload-modal__btn",onClick:t[5]||(t[5]=t=>e.$emit("upload"))}," Загрузить ")])):(0,i.Q3)("",!0)])])):(0,i.Q3)("",!0)])),_:1})}var me=function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};let he=class extends l.lD{constructor(...e){super(...e),(0,s.A)(this,"show",void 0),(0,s.A)(this,"previewUrl",void 0)}triggerFileInput(){const e=this.$refs.fileInput;e.click()}handleFileSelect(e){const t=e.target.files;t&&t.length>0&&this.handleFile(t[0])}handleFileDrop(e){e.dataTransfer&&e.dataTransfer.files.length>0&&this.handleFile(e.dataTransfer.files[0])}handleFile(e){this.$emit("file-selected",e)}};he=me([(0,l.JY)({props:{show:Boolean,previewUrl:String},emits:["close","file-selected","upload"]})],he);var pe=he;const fe=(0,k.A)(pe,[["render",ue],["__scopeId","data-v-2e301c38"]]);var ve=fe,we=function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};let ke=class extends l.lD{constructor(...e){super(...e),(0,s.A)(this,"backend",null),(0,s.A)(this,"imagesCard",[]),(0,s.A)(this,"currentFilter","all"),(0,s.A)(this,"favorites",[]),(0,s.A)(this,"selectedImage",null),(0,s.A)(this,"selectedIndex",-1),(0,s.A)(this,"showDeleteConfirm",!1),(0,s.A)(this,"showUpload",!1),(0,s.A)(this,"uploadPreview",null)}data(){return{backend:null,imagesCard:[],favorites:[]}}mounted(){const e=localStorage.getItem("favorites");e&&(this.favorites=JSON.parse(e)),window.addEventListener("keydown",this.handleKeyPress),"undefined"!==typeof window&&"undefined"!==typeof window.qt&&"undefined"!==typeof window.QWebChannel&&"undefined"!==typeof window.qt.webChannelTransport&&this.loadImagesFromCpp()}loadImagesFromCpp(){return new Promise(((e,t)=>{"undefined"!==typeof window&&"undefined"!==typeof window.qt&&"undefined"!==typeof window.qt.webChannelTransport&&"undefined"!==typeof window.QWebChannel&&new window.QWebChannel(window.qt.webChannelTransport,(r=>{this.backend=r.objects.backend,this.backend.getDrawingImages().then((t=>{Array.isArray(t)?this.imagesCard=t:console.error("Полученные данные не являются массивом:",t),e()})).catch(t)}))}))}beforeUnmount(){window.removeEventListener("keydown",this.handleKeyPress)}get filteredImages(){switch(this.currentFilter){case"recent":return[...this.imagesCard].slice(-5);case"favorite":return this.imagesCard.filter((e=>this.favorites.includes(e)));default:return this.imagesCard}}setFilter(e){this.currentFilter=e}toggleFavorite(e){this.favorites.includes(e)?this.favorites=this.favorites.filter((t=>t!==e)):this.favorites.push(e),localStorage.setItem("favorites",JSON.stringify(this.favorites))}openImageDetail(e,t){event&&event.preventDefault(),this.selectedImage=e,this.selectedIndex=t,document.body.classList.add("modal-open")}closeImageDetail(){this.selectedImage=null,document.body.classList.remove("modal-open")}confirmDelete(){this.showDeleteConfirm=!0}deleteImage(){this.selectedImage&&(this.imagesCard=this.imagesCard.filter((e=>e!==this.selectedImage)),this.favorites.includes(this.selectedImage)&&(this.favorites=this.favorites.filter((e=>e!==this.selectedImage)),localStorage.setItem("favorites",JSON.stringify(this.favorites))),this.showDeleteConfirm=!1,this.closeImageDetail())}editImage(){this.selectedImage&&(this.$router.push({name:"edit",params:{image:this.selectedImage}}).catch((e=>{console.error("Ошибка перехода:",e)})),this.closeImageDetail())}downloadImage(){if(this.selectedImage)try{const e=document.createElement("a");e.href=this.getImageUrl(this.selectedImage),e.download=this.selectedImage,document.body.appendChild(e),e.click(),document.body.removeChild(e)}catch(e){console.error("Ошибка при скачивании изображения:",e)}}getImageUrl(e){try{return r(3864)(`./${e}`)}catch(t){return console.error(t),""}}handleKeyPress(e){this.selectedImage&&("Escape"===e.key?this.closeImageDetail():"ArrowRight"===e.key?this.navigateImage(1):"ArrowLeft"===e.key&&this.navigateImage(-1))}navigateImage(e){if(this.filteredImages.length<=1)return;let t=this.selectedIndex+e;t<0?t=this.filteredImages.length-1:t>=this.filteredImages.length&&(t=0),this.selectedImage=this.filteredImages[t],this.selectedIndex=t}previewFile(e){const t=new FileReader;t.onload=e=>{this.uploadPreview=e.target?.result},t.readAsDataURL(e)}uploadImage(){if(this.uploadPreview){(new Date).getTime();const e=new Date,t=`${String(e.getDate()).padStart(2,"0")}${String(e.getMonth()+1).padStart(2,"0")}${String(e.getFullYear()).slice(-2)}`,r=`${String(e.getHours()).padStart(2,"0")}${String(e.getMinutes()).padStart(2,"0")}${String(e.getSeconds()).padStart(2,"0")}`,i=`userfoto-${t}-${r}.png`;window.backend?window.backend.saveImage(this.uploadPreview,i).then((e=>{e?(this.imagesCard.unshift(i),this.uploadPreview=null,this.showUpload=!1):alert("Произошла ошибка при сохранении изображения")})).catch((e=>{console.error("Ошибка при сохранении изображения:",e),alert("Произошла ошибка при сохранении изображения")})):(console.log("Режим разработки: имитация сохранения изображения",i),this.imagesCard.unshift(i),localStorage.setItem(`userImage_${i}`,this.uploadPreview),this.uploadPreview=null,this.showUpload=!1)}}};ke=we([(0,l.JY)({components:{Header:c.A,DrawToolbar:y,ImageGallery:M,ImageViewModal:z,DeleteConfirmModal:se,UploadModal:ve}})],ke);var _e=ke;const ye=(0,k.A)(_e,[["render",o],["__scopeId","data-v-4acd5a12"]]);var be=ye},8933:function(e,t,r){"use strict";e.exports=r.p+"img/sketch10.jpg"},9462:function(e,t,r){"use strict";var i=r(9565),n=r(2360),a=r(6699),o=r(6279),s=r(8227),l=r(1181),c=r(5966),d=r(7657).IteratorPrototype,g=r(2529),u=r(9539),m=s("toStringTag"),h="IteratorHelper",p="WrapForValidIterator",f=l.set,v=function(e){var t=l.getterFor(e?p:h);return o(n(d),{next:function(){var r=t(this);if(e)return r.nextHandler();if(r.done)return g(void 0,!0);try{var i=r.nextHandler();return r.returnHandlerResult?i:g(i,r.done)}catch(n){throw r.done=!0,n}},return:function(){var r=t(this),n=r.iterator;if(r.done=!0,e){var a=c(n,"return");return a?i(a,n):g(void 0,!0)}if(r.inner)try{u(r.inner.iterator,"normal")}catch(o){return u(n,"throw",o)}return n&&u(n,"normal"),g(void 0,!0)}})},w=v(!0),k=v(!1);a(k,m,"Iterator Helper"),e.exports=function(e,t,r){var i=function(i,n){n?(n.iterator=i.iterator,n.next=i.next):n=i,n.type=t?p:h,n.returnHandlerResult=!!r,n.nextHandler=e,n.counter=0,n.done=!1,f(this,n)};return i.prototype=t?w:k,i}},9494:function(e,t,r){"use strict";e.exports=r.p+"img/sketch.jpg"}}]);
//# sourceMappingURL=about.js.map